# Интернет магазин
Доработка сайта
<br />
Алгоритм работы:<br />
<p>
	После перевода платежа в статус "Оплачено", в файле init.php отрабатывает событие, и полученная сумма в гривнах переводится в баллы, с расчетом 1:5. Гривневая валюта должна иметь ИД "UAH". Баллы сохраняются в пользовательское свойство <b>UF_ACTION_POINT</b>, а дата оплаты - в свойство <b>UF_DATE_LAST_BUY</b>. Дата оплаты необходима для второй сортировки, если у пользователей одинаковое количество баллов, то приоритет выше у последнего. (Вышеописанные данные не связаны с данными в инфоблоке)
</p>
<br />
<p>
Структура инфоблоков:<br />
Инфоблок акции - содержит элементы акции. Активной акция считается, та срок окончания, которой еще не наступил.
Параметры инфоблока:
<p>
URL страницы информационного блока:	 #SITE_DIR#/ru/pages/action.php
URL страницы раздела:	#SITE_DIR#/ru/pages/action.php?SECTION_CODE=#SECTION_CODE#
URL страницы детального просмотра:	#SITE_DIR#/ru/pages/action.php?SECTION_CODE=#SECTION_CODE#&ELEMENT_CODE=#ELEMENT_CODE#
</p>
Обязательные поля:<br />
Начало активности, окончание активности, описание для анонса и символьный код (неповторяющийся).
Дополнительные свойства:<br />
Подарок(gift) - изображения с подарками<br /> 
ИД группы(group) - ID группы в которой состоят участники акции<br /> 
Свойство баллов(point_property) - пользовательское свойство в котором хранятся баллы для участия в акции. По умолчанию UF_ACTION_POINTS.<br />
</p>
<p>
	Для вывода данных акции используются 2 компонента: news.detail (короткая таблица на главной) и news (раздел Акции).
</p>
<br />
<br />
Если файлы существуют, то необходимо в них вставить содержимое. Куда именно вставлять, смотреть по смыслу.
<br />
Список файлов, которые необходимо редактировать:
<br />
/index.php<br />
/ru/pages/action.php<br />
/bitrix/php_interface/init.php<br />
/bitrix/templates/agrinol-shop/header.php<br />
/bitrix/templates/agrinol-shop/styles.css<br />
<br />
Список файлов, которые необходимо вставить:
<br />
/bitrix/php_interface/s1/rarus_event.php<br />
/bitrix/templates/agrinol-shop/include_areas/*<br />
/bitrix/templates/agrinol-shop/components/*<br />
